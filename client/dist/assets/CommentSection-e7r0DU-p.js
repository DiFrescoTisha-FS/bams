import{r as k,e as ye,R as pe,k as _e,u as ge,j as c,f as xe,h as be,l as de,n as Ie,F as Ce,I as Me,T as He,o as le,q as we,s as Te,B as je,t as Ae,v as ze,P as ue,w as Ee}from"./index-BYymD1Vh.js";var ve={},ie={};Object.defineProperty(ie,"__esModule",{value:!0});var g=function(){function e(a,s){var r=[],f=!0,m=!1,i=void 0;try{for(var u=a[Symbol.iterator](),d;!(f=(d=u.next()).done)&&(r.push(d.value),!(s&&r.length===s));f=!0);}catch(S){m=!0,i=S}finally{try{!f&&u.return&&u.return()}finally{if(m)throw i}}return r}return function(a,s){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();ie.default=ke;var x=k;function ke(e){var a=(0,x.useState)(e.count),s=g(a,2),r=s[0],f=s[1],m=(0,x.useState)(e.size),i=g(m,2),u=i[0],d=i[1],S=(0,x.useState)(e.char),b=g(S,2),C=b[0],p=b[1],T=(0,x.useState)(e.color),I=g(T,2),M=I[0],_=I[1],j=(0,x.useState)(e.activeColor),A=g(j,2),o=A[0],z=A[1],N=(0,x.useState)(e.isHalf),E=g(N,2),B=E[0],O=E[1],K=(0,x.useState)(e.edit),R=g(K,2),G=R[0],U=R[1],X=(0,x.useState)(e.emptyIcon),F=g(X,2),J=F[0],Q=F[1],Y=(0,x.useState)(e.halfIcon),P=g(Y,2),Z=P[0],ee=P[1],te=(0,x.useState)(e.filledIcon),W=g(te,2),q=W[0],ae=W[1],re=(0,x.useState)(e.a11y),L=g(re,2),ne=L[0],$=L[1],se={count:r,size:u,char:C,color:M,activeColor:o,isHalf:B,edit:G,emptyIcon:J,halfIcon:Z,filledIcon:q,a11y:ne};function oe(v){f(v.count),d(v.size),p(v.char),_(v.color),z(v.activeColor),O(v.isHalf),U(v.edit),Q(v.emptyIcon),ee(v.halfIcon),ae(v.filledIcon),$(v.a11y)}return[se,oe]}var ce={};Object.defineProperty(ce,"__esModule",{value:!0});var Ne=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};ce.default=Re;var Oe=k,Ue=qe(Oe);function qe(e){return e&&e.__esModule?e:{default:e}}var Be={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"};function Re(e){var a=e.index,s=e.active,r=e.config,f=e.onMouseOver,m=e.onMouseLeave,i=e.onClick,u=e.halfStarHidden,d=e.halfStarAt,S=e.isUsingIcons,b=e.uniqueness,C=r.color,p=r.activeColor,T=r.size,I=r.char,M=r.isHalf,_=r.edit,j=r.halfIcon,A=r.emptyIcon,o=r.filledIcon,z="",N=!1;M&&!u&&d===a&&(S?z="react-stars-half":z="react-stars-"+b,N=!0);var E=Ne({},Be,{color:s?p:C,cursor:_?"pointer":"default",fontSize:T+"px"});function B(){return S?s?o:!s&&N?j:A:I}return Ue.default.createElement("span",{className:z,style:E,key:a,"data-index":a,"data-forhalf":o?a:I,onMouseOver:f,onMouseMove:f,onMouseLeave:m,onClick:i},B())}Object.defineProperty(ve,"__esModule",{value:!0});var w=function(){function e(a,s){var r=[],f=!0,m=!1,i=void 0;try{for(var u=a[Symbol.iterator](),d;!(f=(d=u.next()).done)&&(r.push(d.value),!(s&&r.length===s));f=!0);}catch(S){m=!0,i=S}finally{try{!f&&u.return&&u.return()}finally{if(m)throw i}}return r}return function(a,s){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=k,D=V(H),Fe=ye,y=V(Fe),Le=ie,De=V(Le),Pe=ce,We=V(Pe);function V(e){return e&&e.__esModule?e:{default:e}}var $e={overflow:"hidden",position:"relative"};function Ve(e,a){return`
    .react-stars-`+a+`:before {
      position: absolute;
      overflow: hidden;
      display: block;
      z-index: 1;
      top: 0; left: 0;
      width: 50%;
      content: attr(data-forhalf);
      color: `+e+`;
  }`}function Ke(e){return`
          span.react-stars-half > * {
          color: `+e+`;
      }`}function fe(e){var a=(0,H.useState)(""),s=w(a,2),r=s[0],f=s[1],m=(0,H.useState)(0),i=w(m,2),u=i[0],d=i[1],S=(0,H.useState)([]),b=w(S,2),C=b[0],p=b[1],T=(0,H.useState)(!1),I=w(T,2),M=I[0],_=I[1],j=(0,De.default)(e),A=w(j,2),o=A[0],z=A[1],N=(0,H.useState)(0),E=w(N,2),B=E[0],O=E[1],K=(0,H.useState)(!1),R=w(K,2),G=R[0],U=R[1],X=(0,H.useState)(""),F=w(X,2),J=F[0],Q=F[1];function Y(t){return!t.isHalf&&t.emptyIcon&&t.filledIcon||t.isHalf&&t.emptyIcon&&t.halfIcon&&t.filledIcon}function P(){f((Math.random()+"").replace(".",""))}(0,H.useEffect)(function(){ee(),Z(e.value,e.count),p(q(e.value)),z(e),P(),_(Y(e)),O(Math.floor(e.value)),U(e.isHalf&&e.value%1<.5)},[]);function Z(t,n){t<0||t>n?d(0):d(t)}function ee(){var t="react-stars";Q(e.classNames+(" "+t))}function te(t){return t%1===0}function W(){return o.isHalf?Math.floor(u):Math.round(u)}function q(t){typeof t>"u"&&(t=W());for(var n=[],l=0;l<o.count;l++)n.push({active:l<=t-1});return n}function ae(t){if(o.edit){var n=Number(t.currentTarget.getAttribute("data-index"));if(o.isHalf){var l=L(t);U(l),l&&(n+=1),O(n)}else n+=1;re(n)}}function re(t){var n=C.filter(function(l){return l.active});t!==n.length&&p(q(t))}function L(t){var n=t.target,l=n.getBoundingClientRect(),h=t.clientX-l.left;return h=Math.round(Math.abs(h)),h>l.width/2}function ne(){o.edit&&($(u),p(q()))}function $(t){o.isHalf&&(U(te(t)),O(Math.floor(t)))}function se(t){if(o.edit){var n=Number(t.currentTarget.getAttribute("data-index")),l=void 0;if(o.isHalf){var h=L(t);U(h),h&&(n+=1),l=h?n:n+.5,O(n)}else l=n=n+1;v(l)}}function oe(){return D.default.createElement("style",{dangerouslySetInnerHTML:{__html:M?Ke(o.activeColor):Ve(o.activeColor,r)}})}function v(t){t!==u&&(p(q(t)),d(t),e.onChange(t))}function Se(t){if(!(!o.a11y&&!o.edit)){var n=t.key,l=u,h=Number(n);h?Number.isInteger(h)&&h>0&&h<=o.count&&(l=h):(n==="ArrowUp"||n==="ArrowRight")&&l<o.count?(t.preventDefault(),l+=o.isHalf?.5:1):(n==="ArrowDown"||n==="ArrowLeft")&&l>.5&&(t.preventDefault(),l-=o.isHalf?.5:1),$(l),v(l)}}function he(){return C.map(function(t,n){return D.default.createElement(We.default,{key:n,index:n,active:t.active,config:o,onMouseOver:ae,onMouseLeave:ne,onClick:se,halfStarHidden:G,halfStarAt:B,isUsingIcons:M,uniqueness:r})})}return D.default.createElement("div",{className:"react-stars-wrapper-"+r,style:{display:"flex"}},D.default.createElement("div",{tabIndex:o.a11y&&o.edit?0:null,"aria-label":"add rating by typing an integer from 0 to 5 or pressing arrow keys",onKeyDown:Se,className:J,style:$e},o.isHalf&&oe(),he(),D.default.createElement("p",{style:{position:"absolute",left:"-200rem"},role:"status"},u)))}fe.propTypes={classNames:y.default.string,edit:y.default.bool,half:y.default.bool,value:y.default.number,count:y.default.number,char:y.default.string,size:y.default.number,color:y.default.string,activeColor:y.default.string,emptyIcon:y.default.element,halfIcon:y.default.element,filledIcon:y.default.element,a11y:y.default.bool};fe.defaultProps={edit:!0,half:!1,value:0,count:5,char:"â˜…",size:15,color:"gray",activeColor:"#ffd700",a11y:!0,onChange:function(){}};var Ge=ve.default=fe;const me=pe.memo(({currentUser:e})=>{const{dispatch:a,setErrorMessage:s,clearErrorMessage:r,setSuccessMessage:f,clearSuccessMessage:m}=_e(),i=ge(),u=k.useMemo(()=>i.url("COMMENTBG_2_mctqkg",{transformation:[{width:1920,crop:"scale"},{quality:"auto:good"},{fetch_format:"auto"}]}),[i]),d=k.useMemo(()=>i.url("bam_ctu4i6",{transformation:[{width:455,height:455,crop:"fill"},{quality:"auto"},{fetch_format:"auto"}]}),[i]),[S,b]=k.useState(0),[C,p]=k.useState(""),T=_=>b(_),I=_=>p(_.target.value),M=async _=>{if(_.preventDefault(),!e){a(s("Login required to leave a comment or rate. Please log in to continue."));return}try{await Ee.post("/api/comment-rating",{comment:C,rating:S}),b(0),p(""),a(f("Comment/rating submitted successfully!")),setTimeout(()=>{a(m())},3e3)}catch(j){console.error("Failed to submit comment and rating",j),a(s("Error submitting comment or rating. Please try again later or contact support for assistance.")),setTimeout(()=>{a(r())},3e3)}};return c.jsxs(xe,{id:"comments",children:[c.jsx(be,{children:c.jsx(de,{src:u,alt:"Crescent Moon",position:"absolute",width:"100%",height:"auto",objectFit:"contain",top:0,left:0,loading:"lazy"})}),c.jsx(Ie,{style:{zIndex:"20"},onSubmit:M,children:c.jsxs(Ce,{children:[c.jsx(Me,{children:c.jsx(de,{src:d,alt:"Artist Looking Up At Camera",position:"relative",width:"455px",height:"auto",borderRadius:"10px",border:"2px solid #ac94f4",zIndex:"10",loading:"lazy"})}),c.jsxs(He,{className:"mt-10",children:[c.jsx(le,{as:"p",color:"#fff",fontSize:"20px",fontWeight:"700",textTransform:"uppercase",marginBottom:"16px",letterSpacing:"1.4px",children:"Bam Fans"}),c.jsx(le,{as:"h1",color:"#ac94f4",fontSize:"44px",fontWeight:"600",marginBottom:"24px",tabletFontSize:"40px",phoneFontSize:"32px",children:"Before you go..."}),c.jsx(le,{fontSize:"20px",lineHeight:"26px",color:"#fff",marginTop:"30px",marginBottom:"25px",maxWidth:"440px",phoneFontSize:"18px",children:"Tell Bam what you loved most about your galaxy tour and rate your adventure! Thanks for stopping by."}),c.jsxs(we,{onSubmit:M,children:[c.jsx(Ge,{value:S,onChange:T}),c.jsx(Te,{placeholder:"Leave your comment here",value:C,onChange:I}),c.jsx(je,{children:c.jsxs(Ae,{type:"submit",children:["Submit ",c.jsx(ze,{})]})})]})]})]})})]})});me.displayName="CommentSection";me.propTypes={currentUser:ue.oneOfType([ue.object,ue.bool])};export{me as default};
